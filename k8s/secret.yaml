# Kubernetes Secret for Caracal Core v0.2
# Requirements: 17.2, 17.4
#
# This Secret stores sensitive configuration including database credentials
# and TLS certificates.
#
# IMPORTANT: This is a template. Replace the base64-encoded values with your
# actual credentials and certificates before applying.
#
# To encode values:
#   echo -n "your-password" | base64
#
# To create TLS secret from files:
#   kubectl create secret generic caracal-tls \
#     --from-file=server.crt=./certs/server.crt \
#     --from-file=server.key=./certs/server.key \
#     --from-file=ca.crt=./certs/ca.crt \
#     --from-file=jwt_public.pem=./certs/jwt_public.pem \
#     --namespace=caracal
#
# Usage:
#   kubectl apply -f secret.yaml

apiVersion: v1
kind: Secret
metadata:
  name: caracal-secrets
  namespace: caracal
  labels:
    app.kubernetes.io/name: caracal
    app.kubernetes.io/version: "0.3.0"
    app.kubernetes.io/component: configuration
type: Opaque
data:
  # Database password (base64 encoded)
  # Example: echo -n "your-secure-password" | base64
  DB_PASSWORD: Y2FyYWNhbF9kZXZfcGFzc3dvcmQ=  # caracal_dev_password (CHANGE THIS!)

---
apiVersion: v1
kind: Secret
metadata:
  name: caracal-tls
  namespace: caracal
  labels:
    app.kubernetes.io/name: caracal
    app.kubernetes.io/version: "0.3.0"
    app.kubernetes.io/component: tls
type: Opaque
data:
  # TLS certificates and keys (base64 encoded)
  # Replace these with your actual certificates
  # 
  # To generate self-signed certificates for testing:
  #   openssl req -x509 -newkey rsa:4096 -keyout server.key -out server.crt \
  #     -days 365 -nodes -subj "/CN=caracal-gateway"
  #   openssl req -x509 -newkey rsa:4096 -keyout ca.key -out ca.crt \
  #     -days 365 -nodes -subj "/CN=caracal-ca"
  #   ssh-keygen -t rsa -b 4096 -m PEM -f jwt_private.pem -N ""
  #   openssl rsa -in jwt_private.pem -pubout -out jwt_public.pem
  #
  # Then encode:
  #   cat server.crt | base64 -w 0
  #   cat server.key | base64 -w 0
  #   cat ca.crt | base64 -w 0
  #   cat jwt_public.pem | base64 -w 0
  
  # Gateway TLS certificate (REPLACE WITH YOUR CERTIFICATE)
  server.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCi4uLgotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0t
  
  # Gateway TLS private key (REPLACE WITH YOUR KEY)
  server.key: LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCi4uLgotLS0tLUVORCBQUklWQVRFIEtFWS0tLS0t
  
  # CA certificate for mTLS (REPLACE WITH YOUR CA)
  ca.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCi4uLgotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0t
  
  # JWT public key for JWT authentication (REPLACE WITH YOUR KEY)
  jwt_public.pem: LS0tLS1CRUdJTiBQVUJMSUMgS0VZLS0tLS0KLi4uCi0tLS0tRU5EIFBVQkxJQyBLRVktLS0tLQ==
