# Caracal Core v0.2 Environment Variables
# Copy this file to .env and customize for your environment
#
# Usage:
#   cp .env.example .env
#   # Edit .env with your values
#   docker-compose up -d

# =============================================================================
# Database Configuration
# =============================================================================

# PostgreSQL database name
DB_NAME=caracal

# PostgreSQL username
DB_USER=caracal

# PostgreSQL password (CHANGE THIS IN PRODUCTION!)
DB_PASSWORD=caracal_dev_password

# PostgreSQL port (default: 5432)
DB_PORT=5432

# Database connection pool size
DB_POOL_SIZE=10

# Maximum overflow connections beyond pool size
DB_MAX_OVERFLOW=5

# Connection pool timeout in seconds
DB_POOL_TIMEOUT=30

# =============================================================================
# Gateway Proxy Configuration
# =============================================================================

# Gateway HTTPS port (default: 8443)
GATEWAY_PORT=8443

# Prometheus metrics port (default: 9090)
METRICS_PORT=9090

# Authentication mode: mtls, jwt, or api_key
AUTH_MODE=jwt

# JWT algorithm (when AUTH_MODE=jwt): RS256 or ES256
JWT_ALGORITHM=RS256

# Request timeout in seconds
REQUEST_TIMEOUT=30

# Maximum request size in megabytes
MAX_REQUEST_SIZE_MB=10

# =============================================================================
# Replay Protection Configuration
# =============================================================================

# Enable replay protection (true/false)
ENABLE_REPLAY_PROTECTION=true

# Nonce cache TTL in seconds (default: 300 = 5 minutes)
NONCE_CACHE_TTL=300

# Maximum nonce cache size
NONCE_CACHE_SIZE=100000

# Timestamp validation window in seconds (default: 300 = 5 minutes)
TIMESTAMP_WINDOW=300

# =============================================================================
# Policy Cache Configuration (Degraded Mode)
# =============================================================================

# Enable policy cache for degraded mode (true/false)
ENABLE_POLICY_CACHE=true

# Policy cache TTL in seconds (default: 60 = 1 minute)
POLICY_CACHE_TTL=60

# Maximum policy cache size
POLICY_CACHE_MAX_SIZE=10000

# =============================================================================
# Provisional Charges Configuration
# =============================================================================

# Default provisional charge expiration in seconds (default: 300 = 5 minutes)
PROVISIONAL_CHARGE_EXPIRATION=300

# Maximum provisional charge timeout in minutes (default: 60 = 1 hour)
PROVISIONAL_CHARGE_MAX_TIMEOUT=60

# Cleanup job interval in seconds (default: 60 = 1 minute)
PROVISIONAL_CHARGE_CLEANUP_INTERVAL=60

# Cleanup batch size (default: 1000)
PROVISIONAL_CHARGE_CLEANUP_BATCH_SIZE=1000

# =============================================================================
# MCP Adapter Configuration
# =============================================================================

# MCP Adapter HTTP port (default: 8080)
MCP_ADAPTER_PORT=8080

# MCP servers configuration (format: name1:url1,name2:url2)
# Example: MCP_SERVERS=local:http://localhost:3000,remote:http://mcp-server:3001
MCP_SERVERS=

# MCP server timeout in seconds
MCP_SERVER_TIMEOUT=30

# =============================================================================
# Logging Configuration
# =============================================================================

# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO
