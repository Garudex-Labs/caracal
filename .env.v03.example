# Caracal Core v0.3 - Environment Variables Example
# Copy this file to .env and update with your values

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
DB_NAME=caracal
DB_USER=caracal
DB_PASSWORD=caracal_dev_password_CHANGE_ME
DB_PORT=5432
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=5
DB_POOL_TIMEOUT=30

# ============================================================================
# REDIS CONFIGURATION (v0.3)
# ============================================================================
REDIS_PASSWORD=caracal_redis_password_CHANGE_ME
REDIS_PORT=6379
REDIS_DB=0
REDIS_SSL=false
REDIS_SPENDING_CACHE_TTL=86400
REDIS_METRICS_CACHE_TTL=3600

# ============================================================================
# KAFKA CONFIGURATION (v0.3)
# ============================================================================
# For development (single broker)
KAFKA_BOOTSTRAP_SERVERS=kafka:9092
KAFKA_SECURITY_PROTOCOL=PLAINTEXT

# For production (3 brokers with SASL/SSL)
# KAFKA_BOOTSTRAP_SERVERS=kafka-1:9092,kafka-2:9092,kafka-3:9092
# KAFKA_SECURITY_PROTOCOL=SASL_SSL
# KAFKA_SASL_MECHANISM=SCRAM-SHA-512
# KAFKA_SASL_USERNAME=caracal
# KAFKA_SASL_PASSWORD=kafka_password_CHANGE_ME

# Schema Registry
SCHEMA_REGISTRY_URL=http://schema-registry:8081

# ============================================================================
# MERKLE TREE CONFIGURATION (v0.3)
# ============================================================================
MERKLE_BATCH_SIZE_LIMIT=1000
MERKLE_BATCH_TIMEOUT_SECONDS=300
MERKLE_SIGNING_ALGORITHM=ECDSA-P256

# ============================================================================
# GATEWAY CONFIGURATION
# ============================================================================
GATEWAY_PORT=8443
METRICS_PORT=9090
AUTH_MODE=jwt
LOG_LEVEL=INFO
REQUEST_TIMEOUT=30
MAX_REQUEST_SIZE_MB=10

# JWT Configuration
JWT_ALGORITHM=RS256

# Replay Protection
ENABLE_REPLAY_PROTECTION=true
NONCE_CACHE_TTL=300
NONCE_CACHE_SIZE=100000
TIMESTAMP_WINDOW=300

# Policy Cache
ENABLE_POLICY_CACHE=true
POLICY_CACHE_TTL=60
POLICY_CACHE_MAX_SIZE=10000

# Provisional Charges
PROVISIONAL_CHARGE_EXPIRATION=300
PROVISIONAL_CHARGE_MAX_TIMEOUT=60
PROVISIONAL_CHARGE_CLEANUP_INTERVAL=60
PROVISIONAL_CHARGE_CLEANUP_BATCH_SIZE=1000

# ============================================================================
# MCP ADAPTER CONFIGURATION
# ============================================================================
MCP_ADAPTER_PORT=8080
MCP_SERVERS=
MCP_SERVER_TIMEOUT=30

# ============================================================================
# CONSUMER CONFIGURATION (v0.3)
# ============================================================================
METRICS_AGGREGATOR_PORT=9091
ANOMALY_DETECTION_THRESHOLD=2.0
AUDIT_LOG_RETENTION_DAYS=2555

# ============================================================================
# MONITORING CONFIGURATION
# ============================================================================
ENABLE_PROMETHEUS_METRICS=true
ENABLE_STRUCTURED_LOGGING=true
